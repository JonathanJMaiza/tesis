<div class="caja">
<mat-card class="registro">
  <form [formGroup]="forma" (ngSubmit)="register(forma)">

        <mat-card-title class="text-center" *ngIf="modificar==false">Crear Usuario</mat-card-title>
        <mat-card-title class="text-center" *ngIf="modificar==true">Modificar Usuario</mat-card-title>
        <mat-error *ngIf="checked" class="text-center" >Usuario ya existente no se puede registrar</mat-error>
        <mat-form-field appearance="outline" class="contorno">
            <mat-label>Nombres</mat-label>
            <input matInput type="text" placeholder="Ingrese su correo "  [(ngModel)]="usuario.nombre" formControlName="nombre" required>
              <mat-hint   class="text-danger" *ngIf="nombreNoValido">Nombre requerido</mat-hint>
        </mat-form-field>
        <mat-form-field appearance="outline" class="contorno">
            <mat-label>Apellidos</mat-label>
            <input matInput type="text" placeholder="Ingrese su correo" [(ngModel)]="usuario.apellido" formControlName="apellido" required>
            <mat-hint   class="text-danger" *ngIf="apellidoNoValido">Apellido requerido</mat-hint>
        </mat-form-field>

        <mat-form-field appearance="outline" class="contorno">
            <mat-label>Correo Electronico</mat-label>
            <input matInput type="email" placeholder="Ingrese su correo" [(ngModel)]="usuario.email" formControlName="email" required>
            <mat-hint   class="text-danger" *ngIf="emailNoValido">Correo invalido</mat-hint>
        </mat-form-field>

        <mat-form-field  appearance="outline" class="contorno-select">
            <mat-label>Genero</mat-label>
            <mat-select [(ngModel)]="usuario.genero"  formControlName="genero" required>
                <mat-option value="masculino">Masculino</mat-option>
                <mat-option value="femenino">Femenino</mat-option>
                <mat-option value="otro">Otro</mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline" class="contorno-select">
            <mat-label>Fecha Nacimiento</mat-label>
            <input matInput [matDatepicker]="picker"  [(ngModel)]="usuario.fechanacimiento" formControlName="fechanacimiento" required>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        <div >
          <mat-label class="contorno-radio-warn"  *ngIf="rolNoValido">Seleccione el tipo de usuario:</mat-label>
        <mat-label class="contorno-radio" *ngIf="!rolNoValido">Seleccione el tipo de usuario:</mat-label>
        <mat-radio-group aria-label="Select an option" color="primary" class="contorno-radio" [(ngModel)]="usuario.rol" formControlName="rol" required>
          <mat-radio-button value="estudiante" [ngClass]="{'radio': !rolNoValido, 'radio-warn': rolNoValido}" >Estudiante</mat-radio-button>
          <mat-radio-button value="docente" [ngClass]="{'radio': !rolNoValido, 'radio-warn': rolNoValido}">Docente</mat-radio-button>
          <mat-radio-button value="secretaria" [ngClass]="{'radio': !rolNoValido, 'radio-warn': rolNoValido}">Secretaria</mat-radio-button>
          <mat-radio-button value="aeesfot" [ngClass]="{'radio': !rolNoValido, 'radio-warn': rolNoValido}">P. Esfot</mat-radio-button>
          <mat-radio-button value="administrador" [ngClass]="{'radio': !rolNoValido, 'radio-warn': rolNoValido}">Administrador</mat-radio-button>
        </mat-radio-group>
        </div>
        <div class="section">
          <mat-label required>Verificar Usuario:</mat-label>
          <mat-checkbox class="verificar" [(ngModel)]="usuario.usuario_verificado" formControlName="usuario_verificado"> <mat-label *ngIf="checked">Verificado</mat-label>  <mat-label *ngIf="!checked">No Verificado</mat-label></mat-checkbox>
        </div>

        <mat-form-field appearance="outline" class="contorno">
            <mat-label>Contraseña</mat-label>
            <input matInput [type]="hide ? 'password' : 'text'" placeholder="Ingrese su contraseña"   [(ngModel)]="usuario.password"  formControlName="password" required>
            <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide" type="button">
        <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-error   class="text-danger" *ngIf="passwordNoValido">Mínimo 8 caracteres incluyendo al menos una mayúscula una minúscula y un número </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="contorno">
            <mat-label>Contraseña</mat-label>
            <input matInput [type]="hide ? 'password' : 'text'" placeholder="Ingrese su contraseña"   [(ngModel)]="usuario.password1"  formControlName="password1" required>
            <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide" type="button">
        <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-hint   class="text-danger" *ngIf="password1Novalido">Las constraseñas no coinciden </mat-hint>
        </mat-form-field>

        <br>
        <mat-card-actions *ngIf="modificar==false" class="text-center">
            <button mat-raised-button color="primary" name="button" type="submit">Crear</button>
        </mat-card-actions>
        <mat-card-actions  *ngIf="modificar==true"class="text-center">
            <button mat-raised-button color="primary" name="button" type="button" (click)="imprimirDatos">Guardar</button>
        </mat-card-actions>
    </form>
    </mat-card>
    </div>
